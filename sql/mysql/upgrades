# This is the upgrade file for SQL. What does this mean to you?
# If you are a developer you should leave notes here as to what
# was done and when. Tihs include inserts, alter tables and deletions.
# The Format is that you add your changes to the end with notes
# and who you are. If your changes occur after a certain release tag
# then you need to place your changes there.
# LCR 2/7, 10PM T_2_3_0_9 

# To fix the data in users to add the + sign to positive values -Brian
UPDATE users_param SET value = CONCAT("+",value) WHERE (name LIKE "reason%" OR name LIKE "people_bonus%") AND value LIKE "_";

# Upgrade Zoo to latest schema, once your do this run the rebuild script 
# in the plugin. -Brian
CREATE TABLE temp_zoo SELECT * FROM people;
DROP TABLE IF EXISTS people;
CREATE TABLE people (
										 	id MEDIUMINT UNSIGNED NOT NULL auto_increment,
											uid MEDIUMINT UNSIGNED NOT NULL,
											person MEDIUMINT UNSIGNED NOT NULL,
											type enum("friend","foe"),
											perceive enum("fan","freak"),
											fof MEDIUMINT UNSIGNED NOT NULL  DEFAULT 0, 
											eof MEDIUMINT UNSIGNED NOT NULL  DEFAULT 0,
											UNIQUE degree_of_separation (uid,person),
											PRIMARY KEY (id)
											);
INSERT INTO people (uid,person,type) VALUES  SELECT uid, person, type from temp_zoo;


# This was removed from the bonus system a while ago. -Brian
ALTER TABLE users_comments DROP anon_comments;
